
@{
    ViewBag.Title = "User2";
}


<style>
   
</style>


<h2>Users</h2>

<body>
    User ID: <div id="idpanel"> </div>
    <input type="hidden" id="userid" />
    <br />
    <table id="notiflist">
        <thead>
            <tr>
                <td>Notification</td>
                <td>Time sent</td>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</body>

@section scripts {
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script>
        $(function () {
            var nhub = $.connection.notifHub;


            nhub.client.addMessageToUser = function (message, time) {
                $('#notiflist tbody').append('<tr><td>' + message + '</td><td>' + time + '</td></tr>');
            }

            $.connection.hub.start().done(function () {
                $('#userid').val(prompt('Enter your UserID : ', ''));
                document.getElementById("idpanel").innerHTML = $('#userid').val();

                nhub.server.addConnectionId($('#userid').val());
            });
        });
    </script>
}