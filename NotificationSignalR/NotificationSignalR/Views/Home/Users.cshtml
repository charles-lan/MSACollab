
@{
    ViewBag.Title = "Users";
}

<h2>Users</h2>

<body>
        Connection ID: <div id="userid"></div>
        <input type="checkbox" name="groups" value= "g1"/> Group 1
        <input type="checkbox" name="groups" value ="g2"/> Group 2
        <input type="checkbox" name="groups" value ="g3"/> Group 3
    <br />
    <ul id="notiflist">
    </ul>
</body>

@section scripts {
    <script src="~/Scripts/jquery.signalR-2.2.0.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script>
        $(function() {
            var nhub = $.connection.notifHub;

            nhub.client.getUserId = function (connectionid) {
                $('#userid').append(connectionid);
            }

            $.connection.hub.start().done(function () {
                $("input[type='checkbox'][name=groups]").click(function () {
                    if(this.checked) {
                        nhub.server.joinGroup(getConnectionId(), $("input[type='checkbox'][name='groups']").val());
                    }
                }

                    var inputgroup = $("input[type='checkbox'][name='groups']").change(function())
                        nhub.server.joinGroup(getConnectionId(), $('#groups').val());
                    }
                });
            });
        });
    </script>
}